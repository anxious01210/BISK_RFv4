<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>BISK â€¢ Cameras</title>
    <style>
        body {
            font: 14px/1.5 system-ui, sans-serif;
            margin: 24px;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            border-bottom: 1px solid #eee;
            padding: 8px;
            text-align: left;
        }

        .ok {
            color: #2a7;
            font-weight: 600;
        }

        .warn {
            color: #d88;
            font-weight: 600;
        }

        .age {
            color: #666;
        }

        .tag {
            background: #eef;
            border-radius: 10px;
            padding: 2px 8px;
            font-size: 12px;
        }
    </style>
    <meta http-equiv="refresh" content="15">
</head>
<body>
<h2>Cameras</h2>
<table>
    <thead>
    <tr>
        <th>Camera</th>
        <th>Profile</th>
        <th>Last heartbeat</th>
        <th>FPS</th>
        <th>Detected</th>
        <th>Matched</th>
        <th>Status</th>
    </tr>
    </thead>
    <tbody>
    {% for cam, rows in grouped.items %}
        {% for row in rows %}
            {% with hb=row.hb age=row.age status=row.status %}
                <tr>
                    <td>{{ cam.name }}</td>
                    <td><span class="tag">{{ hb.profile.name }}</span></td>
                    <td class="age">{{ hb.ts }}</td>
                    <td>{{ hb.fps|floatformat:1 }}</td>
                    <td>{{ hb.detected }}</td>
                    <td>{{ hb.matched }}</td>
                    <td>
                        {% if status == "online" %}
                            <span class="ok">Online</span>
                        {% elif status == "stale" %}
                            <span class="warn">Stale ({{ age }}s)</span>
                        {% else %}
                            <span class="warn">Offline ({{ age }}s)</span>
                        {% endif %}
                    </td>
                </tr>
            {% endwith %}
        {% endfor %}
    {% empty %}
        <tr>
            <td colspan="7">No heartbeats yet.</td>
        </tr>
    {% endfor %}
    </tbody>

</table>
<p style="margin-top:10px;"><a href="/dashboard/system_stats/">System stats</a></p>
</body>
</html>
