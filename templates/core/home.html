<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>BISK • Portal</title>
  <style>
      :root {
          --bg: #0b1220;
          --card: rgba(255, 255, 255, .06);
          --card2: rgba(255, 255, 255, .10);
          --text: rgba(255, 255, 255, .92);
          --muted: rgba(255, 255, 255, .70);
          --border: rgba(255, 255, 255, .12);
          --shadow: 0 24px 60px rgba(0, 0, 0, .45);
          --a: #7c3aed;
          --b: #22c55e;
          --c: #06b6d4;
      }

      @media (prefers-color-scheme: light) {
          :root {
              --bg: #f4f7fb;
              --card: rgba(0, 0, 0, .04);
              --card2: rgba(0, 0, 0, .06);
              --text: rgba(0, 0, 0, .88);
              --muted: rgba(0, 0, 0, .55);
              --border: rgba(0, 0, 0, .10);
              --shadow: 0 24px 60px rgba(2, 6, 23, .12);
          }
      }

      * {
          box-sizing: border-box
      }

      body {
          margin: 0;
          min-height: 100vh;
          font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, Arial;
          background: radial-gradient(1100px 600px at 20% 10%, rgba(124, 58, 237, .25), transparent 60%),
          radial-gradient(900px 500px at 80% 25%, rgba(6, 182, 212, .18), transparent 55%),
          radial-gradient(800px 500px at 45% 90%, rgba(34, 197, 94, .14), transparent 55%),
          var(--bg);
          color: var(--text);
      }

      .wrap {
          width: min(1050px, 92vw);
          margin: 0 auto;
          padding: 52px 0 64px
      }

      header {
          display: flex;
          align-items: flex-end;
          justify-content: space-between;
          gap: 16px;
          margin-bottom: 28px
      }

      .brand {
          display: flex;
          gap: 14px;
          align-items: center
      }

      .logo {
          width: 44px;
          height: 44px;
          border-radius: 14px;
          background: linear-gradient(135deg, rgba(124, 58, 237, .95), rgba(6, 182, 212, .85));
          box-shadow: 0 12px 28px rgba(124, 58, 237, .22);
          border: 1px solid rgba(255, 255, 255, .18)
      }

      @media (prefers-color-scheme: light) {
          .logo {
              border: 1px solid rgba(0, 0, 0, .10)
          }
      }

      h1 {
          margin: 0;
          font-size: clamp(22px, 2.2vw, 28px);
          letter-spacing: .2px
      }

      .subtitle {
          margin: 4px 0 0;
          color: var(--muted);
          font-size: 14px;
          line-height: 1.4
      }

      .meta {
          text-align: right;
          color: var(--muted);
          font-size: 13px;
          line-height: 1.5;
          white-space: nowrap
      }

      .grid {
          display: grid;
          grid-template-columns:repeat(12, 1fr);
          gap: 16px;
          margin-top: 18px
      }

      .card {
          grid-column: span 12;
          background: linear-gradient(180deg, var(--card), var(--card2));
          border: 1px solid var(--border);
          border-radius: 18px;
          padding: 18px 18px 16px;
          box-shadow: var(--shadow);
          position: relative;
          overflow: hidden;
          transition: transform .14s ease, border-color .14s ease, box-shadow .14s ease;
      }

      @media (min-width: 860px) {
          .card {
              grid-column: span 4
          }
      }

      .card:hover {
          transform: translateY(-2px)
      }

      .badge {
          display: inline-flex;
          align-items: center;
          gap: 8px;
          padding: 6px 10px;
          border-radius: 999px;
          font-size: 12px;
          border: 1px solid var(--border);
          background: rgba(255, 255, 255, .06)
      }

      @media (prefers-color-scheme: light) {
          .badge {
              background: rgba(0, 0, 0, .03)
          }
      }

      .dot {
          width: 10px;
          height: 10px;
          border-radius: 999px;
          background: var(--a)
      }

      .dot.b {
          background: var(--b)
      }

      .dot.c {
          background: var(--c)
      }

      .title {
          margin: 12px 0 6px;
          font-size: 18px
      }

      .desc {
          margin: 0 0 14px;
          color: var(--muted);
          font-size: 14px;
          line-height: 1.55;
          min-height: 44px
      }

      .row {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 12px;
          margin-top: 8px
      }

      .path {
          font-family: ui-monospace, Menlo, Consolas, monospace;
          font-size: 12px;
          color: var(--muted);
          border: 1px dashed var(--border);
          padding: 6px 10px;
          border-radius: 12px;
          background: rgba(255, 255, 255, .03)
      }

      @media (prefers-color-scheme: light) {
          .path {
              background: rgba(0, 0, 0, .02)
          }
      }

      a.btn {
          display: inline-flex;
          align-items: center;
          gap: 10px;
          text-decoration: none;
          color: var(--text);
          padding: 10px 14px;
          border-radius: 14px;
          border: 1px solid var(--border);
          background: rgba(255, 255, 255, .06);
          font-weight: 600;
          font-size: 14px;
          white-space: nowrap
      }

      @media (prefers-color-scheme: light) {
          a.btn {
              background: rgba(0, 0, 0, .03)
          }
      }

      .arrow {
          width: 10px;
          height: 10px;
          border-right: 2px solid currentColor;
          border-top: 2px solid currentColor;
          transform: rotate(45deg);
          opacity: .8
      }

      footer {
          margin-top: 22px;
          color: var(--muted);
          font-size: 13px;
          display: flex;
          justify-content: space-between;
          gap: 12px;
          flex-wrap: wrap
      }
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <h1>BISK Control Center</h1>
        <p class="subtitle">Quick access to administration and dashboards.</p>
      </div>
    </div>
    <div class="meta">
      <div>
        User:
        <strong>
          {% if request.user.is_authenticated %}
            {{ request.user.username }}
          {% else %}
            Guest
          {% endif %}
        </strong>
      </div>

      {% if request.user.is_authenticated %}
        <form method="post" action="{% url 'logout' %}" style="margin-top:6px">
          {% csrf_token %}
          <button type="submit"
                  style="all:unset;cursor:pointer;color:inherit;text-decoration:underline;opacity:.9">
            Logout
          </button>
        </form>
      {% else %}
        <div style="margin-top:6px">
          <a href="/admin/login/?next=/" style="color:inherit;text-decoration:underline;opacity:.9">
            Login
          </a>
        </div>
      {% endif %}
    </div>

  </header>

  <div class="grid">
    {% if can_admin %}
      <section class="card">
        <span class="badge"><span class="dot"></span> Administration</span>
        <h2 class="title">Django Admin</h2>
        <p class="desc">Manage students, subscriptions, settings, and configuration.</p>
        <div class="row">
          <span class="path">/admin/</span>
          <a class="btn" href="/admin/">Open Admin <span class="arrow"></span></a>
        </div>
      </section>
    {% endif %}

    {% if can_lunch %}
      <section class="card">
        <span class="badge"><span class="dot b"></span> Lunch</span>
        <h2 class="title">Lunch Dashboard</h2>
        <p class="desc">Monitor lunch subscriptions, usage, and daily operations.</p>
        <div class="row">
          <span class="path">/dash/lunch/</span>
          <a class="btn" href="/dash/lunch/">Open Lunch <span class="arrow"></span></a>
        </div>
      </section>
    {% endif %}

    {% if can_system %}
      <section class="card">
        <span class="badge"><span class="dot c"></span> System</span>
        <h2 class="title">System Dashboard</h2>
        <p class="desc">Health, logs, services, and runtime monitoring.</p>
        <div class="row">
          <span class="path">/dash/system/</span>
          <a class="btn" href="/dash/system/">Open System <span class="arrow"></span></a>
        </div>
      </section>
    {% endif %}
    {% if not can_admin and not can_lunch and not can_system %}
      <section class="card" style="grid-column: span 12;">
        <span class="badge"><span class="dot"></span> Access</span>

        {% if request.user.is_authenticated %}
          <h2 class="title">No dashboard access</h2>
          <p class="desc">
            You are logged in, but your account doesn’t have a dashboard role yet.
            Ask an admin to add you to the appropriate group.
          </p>
          <div class="row">
            <span class="path">/</span>
            <a class="btn" href="/admin/">
              Open Admin <span class="arrow"></span>
            </a>
          </div>
        {% else %}
          <h2 class="title">Welcome</h2>
          <p class="desc">
            Please log in to access the admin panel and dashboards.
          </p>
          <div class="row">
            <span class="path">/admin/login/</span>
            <a class="btn" href="/admin/login/?next=/">
              Go to login <span class="arrow"></span>
            </a>
          </div>
        {% endif %}
      </section>
    {% endif %}

  </div>

  <footer>
    <div>Tip: Ctrl+Click opens in new tab.</div>
    <div>© {{ year }} BISK</div>
  </footer>
</div>
</body>
</html>
